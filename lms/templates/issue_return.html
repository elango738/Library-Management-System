{% extends 'layout.html' %}
{% block content %}
  <h2>Issue Book</h2>
  <form method="post" class="form-grid">
    <label>Book
      <select name="book_id">
        {% for b in books %}
          <option value="{{ b.id }}" {% if selected_book_id and (b.id == selected_book_id) %}selected{% endif %}>{{ b.title }} ({{ b.copies_available }} available)</option>
        {% endfor %}
      </select>
    </label>
    {% if current_user.is_authenticated and current_user.role == 'admin' %}
    <label>Borrower
      <select name="borrower_id">
        {% for br in borrowers %}
          <option value="{{ br.id }}">{{ br.name }}</option>
        {% endfor %}
      </select>
    </label>
    {% endif %}
    <label>Duration (days)<input name="duration_days" type="number" value="14"></label>
    <div class="form-actions">
      <button class="btn primary">Issue</button>
      <a class="btn" href="{{ url_for('list_books') }}">Cancel</a>
    </div>
  </form>
{% endblock %}
